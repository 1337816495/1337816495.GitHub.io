# Chrome 架构

## 进程和线程

进程是程序的运行环境（或运行时）。比如运行一个程序时，操作系统会为该程序分配一块内存，用来存放代码、数据和一个执行任务的主线程，这个运行环境就叫做进程。

线程则是任务的执行者，它存在于进程的内部，一个进程可以拥有一至多个线程，启用多线程来并行处理任务可以提升执行的效率。

下图展示了进程的结构。

![进程的结构](/static/image/browser/process-structure.png)

进程和线程拥有 4 个特性，分别是：

- 进程内的所有线程都可以读写公共数据。
- 进程内的任意一个线程发生了错误，都会导致整个进程发生崩溃。
- 当进程关闭后，操作系统就会回收该进程所占用的所有内存，哪怕线程发生了内存泄漏。
- 进程之间相互隔离，如果进程之间需要进行数据通信，则需要使用进程间通信机制（IPC）。

## 单进程浏览器

在 2007 年之前，市面上的浏览器都是单进程架构的，这意味着浏览器的所有功能模块都运行在同一个进程里，这些模块包括了网络、插件、JavaScript 运行环境、渲染引擎和页面等。

![单进程浏览器](/static/image/browser/single-process-browser.png)

单进程浏览器的缺点是显著的，它不稳定、不流畅、不安全。由于早期的浏览器需要借助插件来实现 Web视频、Web 游戏等功能，而插件的质量良莠不齐，当插件崩溃时，便会导致整个浏览器的崩溃，这是不稳定的原因。

TODO

TODO

TODO

TODO

TODO

https://time.geekbang.org/column/article/113513