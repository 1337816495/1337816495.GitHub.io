---
typora-root-url: ..\..
---

# 合成器线程

## 概述

TODO：描述不当。本文将会介绍合成器线程会如何处理页面的输入事件，以及有哪些优化技巧可以保障页面的流畅度。

## 如何处理输入事件

首先需要厘清的是，输入事件的真正含义是“用户与浏览器进行了交互”而不是通俗理解的“输入”，譬如点击鼠标、触摸屏幕、键入文本等等都属于输入事件。

另外，我们所看见的浏览器的画面其实是由一幅幅的位图组成的，当用户与浏览器进行了互动后，浏览器就会迅速的生成新的位图来替换旧的位图，于是用户便是产生浏览器在响应自己的错觉。比如，当用户滚动页面时，浏览器就会频繁的根据页面滚动后的新位置来生成新的页面位图，并替换掉旧的页面位图。如果这个更新的频率够高且时间间隔均匀，那么用户就会感觉到画面是流畅的，否则用户就会感觉到画面是卡顿的，卡顿（jank）的本质是更新的延迟。

当用户点击页面时，浏览器进程会捕获这个点击事件，然后将该事件的类型（如 `click`）与坐标（如 `(x, y)`）转发给渲染进程，然后渲染进程会查询是否存在事件监听器，如果有便调用事件监听器

