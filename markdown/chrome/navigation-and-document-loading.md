---
typora-root-url: ..\..
---

# 浏览器的导航与文档加载

## 概述

TODO：导航和文档加载的定义。

## 浏览器进程

在正式开始本文之前，我们需要先了解一下浏览器进程的作用。在 Chrome 中，选项卡之外的所有内容都由浏览器进程来处理，它有 UI 线程、网络线程、存储线程等线程，其中 UI 线程负责绘制浏览器界面（比如按钮、地址栏等），网络线程负责从互联网下载数据，存储线程负责控制文件访问。

> 注意，Chrome 已经将与网络传输相关的功能重构为网络服务，浏览器进程会视情况来决定网络服务应当运行在哪个进程或线程中。对于大多数平台，网络服务都运行在实用程序进程的 IO 线程上，对于 Android，网络服务运行在浏览器进程的网络线程上。
>
> 本文将假设网络服务运行在浏览器进程的网络线程上。

![浏览器进程的作用](/static/image/markdown/chrome/navigation-and-document-loading/browser-process-role.png)

## 导航阶段

导航分为 5 个阶段，分别是：

1. 1

### 第 1 步：处理输入

Chrome 中的地址栏是由浏览器进程的 UI 线程管理的。用户在地址栏中输入了待搜索的内容，然后按下回车键，UI 线程首先会判断输入的内容是一个 URL（如 `https://www.jynxio.com`） 还是一个用于搜索的词条（如 `jynxio`）。

如果是后者，UI 线程就会使用搜索引擎来合成一段带有这个搜索词条的新 URL，比如，如果搜索词条是 `jynxio` 且地址栏使用的是 Google 搜索的话，就会构造出如下的 URL。

```
https://www.google.com/search?q=jynxio&oq=jynxio&aqs=chrome.0.69i59j35i39j69i60l6.1869j0j9&sourceid=chrome&ie=UTF-8
```

如果是前者，则直接用来准备

UI 线程就会为这段 URL 补充缺失的协议来合成一段完整的
